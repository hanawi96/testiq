---
import BaseLayout from '../../layouts/BaseLayout.astro';
---

<BaseLayout title="TipTap Crop Test">
  <main class="container mx-auto px-4 py-8">
    <div class="max-w-4xl mx-auto">
      <h1 class="text-3xl font-bold mb-6 text-center">ğŸ§ª TipTap Image Hover Overlay Test</h1>
      
      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6">
        <h2 class="text-xl font-semibold mb-4">ğŸ“‹ HÆ°á»›ng dáº«n test:</h2>
        <ol class="list-decimal list-inside space-y-2 text-gray-700 dark:text-gray-300">
          <li>Click vÃ o nÃºt <strong>"Image"</strong> trong toolbar Ä‘á»ƒ upload áº£nh</li>
          <li>Upload má»™t áº£nh vÃ  chÃ¨n vÃ o editor</li>
          <li><strong>Hover</strong> lÃªn áº£nh trong editor Ä‘á»ƒ hiá»ƒn thá»‹ overlay</li>
          <li>Test cÃ¡c chá»©c nÄƒng trong overlay:
            <ul class="list-disc list-inside ml-4 mt-1 space-y-1">
              <li><strong>Edit Alt Text:</strong> Chá»‰nh sá»­a mÃ´ táº£ áº£nh</li>
              <li><strong>Crop:</strong> Cáº¯t áº£nh vá»›i tool crop</li>
              <li><strong>Replace:</strong> Thay tháº¿ áº£nh báº±ng áº£nh khÃ¡c</li>
              <li><strong>Delete:</strong> XÃ³a áº£nh khá»i editor</li>
            </ul>
          </li>
          <li>Kiá»ƒm tra overlay tá»± Ä‘á»™ng áº©n khi di chuá»™t ra ngoÃ i</li>
        </ol>
      </div>

      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6">
        <h2 class="text-xl font-semibold mb-4">âœï¸ TipTap Editor vá»›i Hover Overlay:</h2>
        <div id="tiptap-container"></div>
      </div>

      <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mt-6">
        <h3 class="font-medium text-blue-900 dark:text-blue-100 mb-2">
          âœ¨ TÃ­nh nÄƒng má»›i:
        </h3>
        <ul class="list-disc list-inside text-blue-800 dark:text-blue-200 space-y-1 text-sm">
          <li><strong>Hover Overlay:</strong> Hiá»ƒn thá»‹ overlay vá»›i 4 chá»©c nÄƒng chÃ­nh khi hover</li>
          <li><strong>TÃ¡i sá»­ dá»¥ng 100%:</strong> ImageCropper, ImageAltEditPopup, ImageUpload</li>
          <li><strong>Smart Positioning:</strong> Overlay tá»± Ä‘á»™ng Ä‘á»‹nh vá»‹ theo áº£nh</li>
          <li><strong>Performance:</strong> Chá»‰ render overlay khi cáº§n thiáº¿t</li>
          <li><strong>UX mÆ°á»£t:</strong> Hover delay 300ms, auto-hide khi leave</li>
          <li><strong>TÃ­ch há»£p TipTap:</strong> Sá»­ dá»¥ng TipTap API Ä‘á»ƒ manipulate images</li>
        </ul>
      </div>
    </div>
  </main>
</BaseLayout>

<script>
  import TiptapEditor from '../../components/admin/articles/editors/TiptapEditor';
  import { createRoot } from 'react-dom/client';
  import React from 'react';

  // Mount TipTap editor
  const container = document.getElementById('tiptap-container');
  if (container) {
    const root = createRoot(container);
    
    function TiptapCropTest() {
      const [content, setContent] = React.useState(`
        <h2>ğŸ§ª Test TipTap Image Hover Overlay</h2>
        <p>Click vÃ o nÃºt <strong>Image</strong> trong toolbar Ä‘á»ƒ upload áº£nh.</p>
        <p>Sau khi áº£nh Ä‘Æ°á»£c chÃ¨n vÃ o editor, <strong>hover</strong> lÃªn áº£nh Ä‘á»ƒ tháº¥y overlay vá»›i cÃ¡c chá»©c nÄƒng:</p>
        <ul>
          <li>âœï¸ <strong>Edit Alt Text</strong> - Chá»‰nh sá»­a mÃ´ táº£ áº£nh</li>
          <li>âœ‚ï¸ <strong>Crop</strong> - Cáº¯t áº£nh</li>
          <li>ğŸ”„ <strong>Replace</strong> - Thay tháº¿ áº£nh</li>
          <li>ğŸ—‘ï¸ <strong>Delete</strong> - XÃ³a áº£nh</li>
        </ul>
      `);

      return React.createElement(TiptapEditor, {
        value: content,
        onChange: setContent,
        height: '500px',
        placeholder: 'Test crop functionality...'
      });
    }

    root.render(React.createElement(TiptapCropTest));
  }
</script>

<style>
  /* TipTap styles */
  .tiptap-content {
    min-height: 500px;
  }
  
  .tiptap-image {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
</style>
</Layout>
