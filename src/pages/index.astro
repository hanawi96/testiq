---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getLocale } from '../utils/i18n';
import LucideIcon from '../components/LucideIcon.astro';

const locale = getLocale('vi');
---

<BaseLayout
  title={locale.meta.site_name}
  description={locale.meta.description}
  keywords={locale.meta.keywords}
>
  <!-- Hero Section -->
  <section class="relative bg-gradient-to-br from-blue-50 via-white to-purple-50 py-16 md:py-24">
    <!-- Floating Background Elements -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
      <div class="absolute top-20 right-20 w-32 h-32 bg-blue-200/30 rounded-full blur-2xl animate-float"></div>
      <div class="absolute bottom-32 left-16 w-40 h-40 bg-purple-200/30 rounded-full blur-2xl animate-float-delayed"></div>
    </div>

    <div class="max-w-6xl mx-auto px-6 text-center relative z-10">
      <!-- AI Badge -->
      <div class="inline-flex items-center px-4 py-2 bg-white rounded-full shadow-sm border border-blue-100 text-blue-700 text-sm font-medium mb-8">
        <LucideIcon name="sparkles" size={16} class="mr-2" />
        AI Technology • 5M+ Users Worldwide
      </div>

      <!-- Main Title -->
      <h1 class="text-5xl md:text-6xl font-bold mb-6 text-gray-900" style="line-height: 1.3;">
        Test IQ & EQ 
        <span class="text-transparent bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text">Chính Xác Nhất</span>
        Thế Giới
      </h1>

      <!-- Subtitle -->
      <p class="text-xl text-gray-600 max-w-2xl mx-auto mb-10 leading-relaxed">
        Khám phá toàn diện trí tuệ IQ và EQ với công nghệ AI tiên tiến. 
        Kết quả tức thì, phân tích khoa học.
      </p>

      <!-- CTA Buttons -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center mb-12">
        <a href="/test/iq" class="group px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] flex items-center justify-center">
          <LucideIcon name="brain" size={20} class="mr-2" />
          Bắt đầu Test IQ
          <LucideIcon name="arrow-right" size={18} class="ml-2 group-hover:translate-x-1 transition-transform" />
        </a>
        <a href="/leaderboard" class="px-8 py-4 bg-white text-gray-700 rounded-xl font-semibold shadow-md hover:shadow-lg transition-all duration-300 border border-gray-200 flex items-center justify-center">
          <LucideIcon name="trophy" size={18} class="mr-2" />
          Bảng Xếp Hạng
        </a>
      </div>

      <!-- Trust Indicators -->
      <div class="flex items-center justify-center gap-8 text-sm text-gray-500">
        <div class="flex items-center">
          <LucideIcon name="shield-check" size={16} class="mr-1 text-green-500" />
          Bảo mật SSL
        </div>
        <div class="flex items-center">
          <LucideIcon name="zap" size={16} class="mr-1 text-yellow-500" />
          Kết quả tức thì
        </div>
        <div class="flex items-center">
          <LucideIcon name="star" size={16} class="mr-1 text-blue-500" />
          Độ chính xác 99.7%
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="py-20 bg-white">
    <div class="max-w-6xl mx-auto px-6">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold text-gray-900 mb-4">Tại Sao Chọn Chúng Tôi?</h2>
        <p class="text-lg text-gray-600">Công nghệ AI tiên tiến mang đến trải nghiệm test IQ tốt nhất</p>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        <!-- Feature 1 -->
        <div class="text-center p-6 bg-blue-50 rounded-2xl hover:bg-blue-100 transition-colors duration-300">
          <div class="w-16 h-16 mx-auto mb-4 bg-blue-600 rounded-xl flex items-center justify-center">
            <LucideIcon name="target" size={28} class="text-white" />
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3">Độ Chính Xác Cao</h3>
          <p class="text-gray-600">Thuật toán AI được kiểm chứng với độ chính xác 99.7%</p>
        </div>

        <!-- Feature 2 -->
        <div class="text-center p-6 bg-purple-50 rounded-2xl hover:bg-purple-100 transition-colors duration-300">
          <div class="w-16 h-16 mx-auto mb-4 bg-purple-600 rounded-xl flex items-center justify-center">
            <LucideIcon name="zap" size={28} class="text-white" />
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3">Kết Quả Tức Thì</h3>
          <p class="text-gray-600">Nhận kết quả và phân tích chi tiết ngay sau khi hoàn thành</p>
        </div>

        <!-- Feature 3 -->
        <div class="text-center p-6 bg-green-50 rounded-2xl hover:bg-green-100 transition-colors duration-300">
          <div class="w-16 h-16 mx-auto mb-4 bg-green-600 rounded-xl flex items-center justify-center">
            <LucideIcon name="award" size={28} class="text-white" />
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-3">Chứng Chỉ Quốc Tế</h3>
          <p class="text-gray-600">Chứng chỉ IQ được công nhận và có giá trị toàn cầu</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Stats Section -->
  <section class="py-20 bg-gradient-to-r from-blue-50 to-purple-50">
    <div class="max-w-6xl mx-auto px-6 text-center">
      <h2 class="text-4xl font-bold text-gray-900 mb-12">Được Tin Tưởng Toàn Cầu</h2>
      
      <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
        <div class="stat-item">
          <div class="text-4xl font-bold text-blue-600 mb-2" data-count="5">0</div>
          <div class="text-gray-600">Triệu người dùng</div>
        </div>
        <div class="stat-item">
          <div class="text-4xl font-bold text-purple-600 mb-2" data-count="195">0</div>
          <div class="text-gray-600">Quốc gia</div>
        </div>
        <div class="stat-item">
          <div class="text-4xl font-bold text-green-600 mb-2" data-count="99">0</div>
          <div class="text-gray-600">% Độ chính xác</div>
        </div>
        <div class="stat-item">
          <div class="text-4xl font-bold text-orange-600 mb-2" data-count="24">0</div>
          <div class="text-gray-600">Giờ hỗ trợ</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials Section -->
  <section class="py-20 bg-white">
    <div class="max-w-6xl mx-auto px-6">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold text-gray-900 mb-4">Người Dùng Nói Gì?</h2>
        <p class="text-lg text-gray-600">Feedback từ cộng đồng 5 triệu người dùng</p>
      </div>

      <div class="grid md:grid-cols-3 gap-8">
        <!-- Testimonial 1 -->
        <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
          <div class="flex items-center mb-4">
            <div class="w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold">M</div>
            <div class="ml-3">
              <h4 class="font-semibold text-gray-900">Minh Nguyen</h4>
              <p class="text-sm text-gray-500">Software Engineer</p>
            </div>
          </div>
          <p class="text-gray-700 mb-4">"Kết quả test rất chính xác và chi tiết. Giúp tôi hiểu rõ khả năng bản thân để phát triển sự nghiệp."</p>
          <div class="flex text-yellow-400">
            <LucideIcon name="star" size={16} />
            <LucideIcon name="star" size={16} />
            <LucideIcon name="star" size={16} />
            <LucideIcon name="star" size={16} />
            <LucideIcon name="star" size={16} />
          </div>
        </div>

        <!-- Testimonial 2 -->
        <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
          <div class="flex items-center mb-4">
            <div class="w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold">L</div>
            <div class="ml-3">
              <h4 class="font-semibold text-gray-900">Linh Tran</h4>
              <p class="text-sm text-gray-500">Marketing Manager</p>
            </div>
          </div>
          <p class="text-gray-700 mb-4">"Giao diện đẹp, dễ sử dụng. Báo cáo phân tích rất chuyên nghiệp và dễ hiểu."</p>
          <div class="flex text-yellow-400">
            <LucideIcon name="star" size={16} />
            <LucideIcon name="star" size={16} />
            <LucideIcon name="star" size={16} />
            <LucideIcon name="star" size={16} />
            <LucideIcon name="star" size={16} />
          </div>
        </div>

        <!-- Testimonial 3 -->
        <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
          <div class="flex items-center mb-4">
            <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white font-bold">D</div>
            <div class="ml-3">
              <h4 class="font-semibold text-gray-900">Dr. Duc</h4>
              <p class="text-sm text-gray-500">Psychologist</p>
            </div>
          </div>
          <p class="text-gray-700 mb-4">"Công cụ đánh giá IQ chính xác và khoa học. Tôi recommend cho đồng nghiệp."</p>
          <div class="flex text-yellow-400">
            <LucideIcon name="star" size={16} />
            <LucideIcon name="star" size={16} />
            <LucideIcon name="star" size={16} />
            <LucideIcon name="star" size={16} />
            <LucideIcon name="star" size={16} />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-20 bg-gradient-to-r from-blue-600 to-purple-600">
    <div class="max-w-4xl mx-auto px-6 text-center text-white">
      <h2 class="text-4xl font-bold mb-6">Sẵn Sàng Khám Phá Trí Tuệ Của Bạn?</h2>
      <p class="text-xl mb-8 opacity-90">Chỉ 25 phút để có kết quả IQ chính xác và báo cáo chi tiết</p>
      
      <a href="/test/iq" class="inline-flex items-center px-10 py-4 bg-white text-blue-600 rounded-xl font-bold text-lg hover:bg-gray-100 transition-all duration-300 hover:scale-[1.02] shadow-xl">
        <LucideIcon name="play" size={22} class="mr-3" />
        Bắt Đầu Test Ngay
      </a>

      <!-- Trust badges -->
      <div class="flex items-center justify-center gap-8 mt-8 opacity-80 text-sm">
        <div class="flex items-center">
          <LucideIcon name="shield-check" size={16} class="mr-2" />
          100% Bảo mật
        </div>
        <div class="flex items-center">
          <LucideIcon name="clock" size={16} class="mr-2" />
          Kết quả tức thì
        </div>
        <div class="flex items-center">
          <LucideIcon name="award" size={16} class="mr-2" />
          Chứng chỉ quốc tế
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* Optimized animations */
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
  }
  
  @keyframes float-delayed {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-15px); }
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }
  
  .animate-float-delayed {
    animation: float-delayed 8s ease-in-out infinite;
  }

  /* Smooth transitions */
  * {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  /* Hover effects */
  .hover\:scale-\[1\.02\]:hover {
    transform: scale(1.02);
  }

  /* Performance optimizations */
  .stat-item {
    transform: translateZ(0);
  }
</style>

<script>
  // Lightweight scroll animations
  const observeElements = () => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
          
          // Animate stats
          if (entry.target.classList.contains('stat-item')) {
            animateCounter(entry.target.querySelector('[data-count]'));
          }
        }
      });
    }, { threshold: 0.1 });

    // Observe all sections
    document.querySelectorAll('section').forEach(section => {
      section.style.opacity = '0';
      section.style.transform = 'translateY(30px)';
      section.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
      observer.observe(section);
    });

    // Observe stat items
    document.querySelectorAll('.stat-item').forEach(item => observer.observe(item));
  };

  // Efficient counter animation
  const animateCounter = (element) => {
    if (!element || element.dataset.animated) return;
    
    const target = parseInt(element.dataset.count);
    const duration = 2000;
    const start = performance.now();
    
    const animate = (current) => {
      const elapsed = current - start;
      const progress = Math.min(elapsed / duration, 1);
      const value = Math.floor(progress * target);
      
      element.textContent = value + (target === 99 ? '.7' : target > 100 ? 'M+' : '');
      
      if (progress < 1) {
        requestAnimationFrame(animate);
      } else {
        element.dataset.animated = 'true';
      }
    };
    
    requestAnimationFrame(animate);
  };

  // Initialize on load
  document.addEventListener('DOMContentLoaded', observeElements);
</script>