---
export interface Props {
  title: string;
  description?: string;
}

const { title, description = "Admin Panel - IQ Test System" } = Astro.props;

import SEO from '../components/seo/SEO.astro';
import AdminSidebar from '../components/admin/layout/AdminSidebar.astro';
import AdminHeader from '../components/admin/layout/AdminHeader.astro';
---

<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Dark mode script - thêm trước khi trang tải để tránh nhấp nháy -->
  <script is:inline>
    // Lấy theme từ localStorage hoặc preferences
    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const isDark = savedTheme === 'dark' || (!savedTheme && prefersDark);

    // Áp dụng class dark nếu cần
    if (isDark) {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
  </script>

  <SEO
    title={`${title} - Admin`}
    description={description}
    noindex={true}
  />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
</head>
<body class="bg-gray-50 dark:bg-gray-900 min-h-screen font-[Inter] overflow-hidden">

  <!-- Admin Layout Container -->
  <div id="admin-layout" class="flex h-screen">

    <!-- Sidebar -->
    <AdminSidebar currentPath={Astro.url.pathname} />

    <!-- Main Content Area -->
    <div class="flex-1 flex flex-col min-w-0 lg:pl-64 w-full">

      <!-- Header -->
      <AdminHeader title={title} />

      <!-- Main Content -->
      <main class="flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900 p-4 sm:p-6">
        <div class="w-full">
          <slot />
        </div>
      </main>

    </div>
  </div>


  <!-- Admin Layout Scripts -->
  <script>
    // Admin layout is now handled by Astro components
    // No additional JavaScript needed for basic functionality
    console.log('Admin layout initialized');
  </script>
</body>
</html> 